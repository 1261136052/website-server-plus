define("wkapi:widget/misBack/sensitiveWords/sensitiveWords.js",function(e,s,n){var o=e("wkapi:widget/js/dep/jquery/jquery.js"),i={sensitiveWords:null,sensitiveCache:[],init:function(e,s){if("cq02-iknow-mis00.cq02.baidu.com:8099"===location.host){console.log("mis:","cq02-iknow-mis00.cq02.baidu.com:8099"!==location.host);var n=this;n.docId=s;var i=~~o(e).data("page-no");null===n.sensitiveWords?n.getSensitiveWords2(e):n.sensitiveWords.length&&-1===n.sensitiveCache.indexOf(i)&&n.setRedColor(e)}},urlDecode:function(e){for(var s="",n=0;n<e.length;n++){var o=e.charAt(n);
if("+"==o)s+=" ";else if("%"==o){var i=e.substring(n+1,n+3);parseInt("0x"+i)>127?(s+=decodeURI("%"+e.substring(n+1,n+9)),n+=8):(s+=String.fromCharCode(parseInt("0x"+i)),n+=2)}else s+=o}return s},setRedColor:function(e){var s=this,n=s.sensitiveWords,i=e.innerHTML;console.log((new Date).getTime());for(var t=(new Date).getTime(),r=0;r<n.length;r++){var a=/^[\/.A-Za-z0-9]+$/;if(a.test(n[r].keyWord))!function(){var e=n[r].keyWord,s="(>[\\w\\.&;()\\-\\+/*\u2022\\@\\s\\n\\r\\f\\t\\v]*)\\"+e+"([\\w\\.&;()\\-\\+/*\u2022\\@\\s\\n\\r\\f\\t\\v]*</)",o=new RegExp(s,"g");
console.log(o),i=i.replace(o,function(s){var n=new RegExp(e,"g");return s.replace(n,'<span style="background: red;color:#333;">'+e+"</span>")})}(r);else{var d=new RegExp(n[r].keyWord,"g");i=i.replace(d,'<span style="background:red;color:#333;">'+n[r].keyWord+"</span>")}}e.innerHTML=i,s.sensitiveCache.push(~~o(e).data("page-no")),console.log("\u654f\u611f\u8bcd\u4e2a\u6570\uff1a"+r),console.log(parseInt((new Date).getTime(),10)-parseInt(t,10))},getSensitiveWords2:function(e){var s=this,n="/mischeck/mis/getsenseword";
o.ajax({url:n,data:{doc_id:s.docId},dataType:"jsonp"}).done(function(n){n.data&&""!==n.data&&(s.sensitiveWords=JSON.parse(s.urlDecode(n.data)),console.log("sensitiveWords:",s.sensitiveWords),s.setRedColor(e))})}};n.exports=i});