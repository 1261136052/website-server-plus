define("wkapi:widget/tpl/api_share/js/share.js",function(e,i,t){var o=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,s=e("wkcommon:widget/ui/js_core/util/util.js"),a=e("wkapi:widget/tpl/api_share/js/toolsItem.js").toolsItem,r=e("wkapi:widget/tpl/api_share/js/toolsTip.js").toolsTipCreater(),d=e("wkapi:widget/tpl/api_share/js/config.js").config,c=(e("wkapi:widget/tpl/api_share/js/setting.js").setting,e("wkcommon:widget/ui/lib/jquery/jquery.js"),e("wkcommon:widget/ui/js_core/qrcode/qrcode.js")),l=e("wkapi:widget/js/dep/log/log.js"),h=e.data,p="//wenku.baidu.com",w="/view/",m=!1,g=p+w+h.get("WkInfo").DocInfo.docId+".html",q=n({Options:{position:"left",reader:{}},_init:function(){var e=this,i=['<div class="reder-share-model bdshare_t bds_tools_32 get-codes-bdshare" id="">','<a href="#" title="\u5206\u4eab\u5230QQ\u7a7a\u95f4" class="share_lv1_btn qqzone logSend" data-logsend=\'{"send":["view","share",{"sns":"mqqzone","from":"html_view_toolbar"}]}\'>QQ\u7a7a\u95f4</a>','<a href="#" title="\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a" class="share_lv1_btn sinaweibo bds_tsina logSend" data-logsend=\'{"send":["view","share",{"sns":"msina","from":"html_view_toolbar"}]}\'>\u65b0\u6d6a\u5fae\u535a</a>','<a href="#" title="\u5206\u4eab\u5230\u5fae\u4fe1" class="share_lv1_btn share_lv1_btn_weixin weixin logSend" id="share_lv1_btn_weixin" data-logsend=\'{"send":["view","share",{"sns":"mweixin","from":"html_view_toolbar"}]}\'>\u5fae\u4fe1</a>','<div class="weixinTips" id="weixinTips"><div class="qrcode reader-weixin-share-qrcode" id="weixinQrcode"></div><p>\u626b\u4e8c\u7ef4\u7801\uff0c\u5feb\u901f\u5206\u4eab\u5230\u5fae\u4fe1\u670b\u53cb\u5708</p></div>','<a style="display:none;" class="share_lv1_btn more-share reader-shareDoc ic reader-ic-shareDoc" title="\u5206\u4eab" href="###" data-toolsBar-log="share" alog-action="htmltoolbar.share"></a></div>'].join("");
e.el=s.createDom(i),e.clickEl=o.dom.q("reader-shareDoc",e.el,"a")[0],e.qrcodeBtn=o.dom.q("share_lv1_btn_weixin",e.el,"a")[0],e.qrcode=o.dom.q("reader-weixin-share-qrcode",e.el,"div")[0],e.qrcodeTip=o.dom.q("weixinTips",e.el,"div")[0],e.qqZoneBtn=o.dom.q("qqzone",e.el,"a")[0],e.sinaweiboBtn=o.dom.q("sinaweibo",e.el,"a")[0],e.qrcodeInited=!1,e.tip=r,e.fire("onload"),e.bindEvent(),e.setShareConfig()},initQrcode:function(){if(!this.qrcodeInited){var e="?qrcode=1",i=g+e,t={text:i,width:88,height:88};o.browser.ie&&o.browser.ie<9&&(t.width=106,t.height=106,this.qrcode&&(this.qrcode.style.width="106px",this.qrcode.style.height="106px",this.qrcode.style.marginTop="10px")),this.qrcode&&new c(this.qrcode,t),this.qrcodeInited=!0
}},bindEvent:function(){var e=this;o.event.on(e.clickEl,"click",function(i){if(o.event.preventDefault(i),l.xsend(1,100032),e.tip.isShowState())try{e.tip.hide()}catch(i){}else e.showTip(),e.hideWeixinTip()}),o.event.on(e.qqZoneBtn,"click",function(e){o.event.preventDefault(e),l.xsend(1,100032),window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(g)+"&title="+encodeURIComponent("\u6211\u6b63\u5728@\u767e\u5ea6\u6587\u5e93 \u9605\u8bfb\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011\u8fd9\u7bc7\u6587\u7ae0\uff0c\u63a8\u8350\u7ed9\u5927\u5bb6\uff01\u7528\u6587\u5e93\u5ba2\u6237\u7aef\u53ef\u4ee5\u514d\u8d22\u5bcc\u503c\u4e0b\u8f7d\u8be5\u6587\u6863\uff0c\u5ba2\u6237\u7aef\u4e0b\u8f7d\u5730\u5740\uff1ahttp://"+location.host+"/apps?fr=2001 \u60f3\u7acb\u5373\u9605\u8bfb\u8be5\u6587\u6863\u70b9\u8fd9\u91cc\uff1a")+"&pics="+encodeURIComponent("http://img.baidu.com/img/iknow/wenku/erweima2001.jpg"))
}),o.event.on(e.sinaweiboBtn,"click",function(e){o.event.preventDefault(e),l.xsend(1,100032),window.open("http://service.weibo.com/share/share.php?appkey=2273341579&url="+encodeURIComponent(g)+"&title="+encodeURIComponent("#\u5206\u4eab\u6587\u6863\u8d62\u597d\u793c#\u6211\u6b63\u5728@\u767e\u5ea6\u6587\u5e93 \u9605\u8bfb\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011\u8fd9\u7bc7\u6587\u7ae0\uff0c\u63a8\u8350\u7ed9\u5927\u5bb6\uff01\u7528\u6587\u5e93\u5ba2\u6237\u7aef\u53ef\u4ee5\u514d\u8d22\u5bcc\u503c\u4e0b\u8f7d\u8be5\u6587\u6863\uff0c\u5ba2\u6237\u7aef\u4e0b\u8f7d\u5730\u5740\uff1ahttp://"+location.host+"/apps?fr=2001 \u60f3\u7acb\u5373\u9605\u8bfb\u8be5\u6587\u6863\u70b9\u8fd9\u91cc\uff1a")+"&pic="+encodeURIComponent("http://img.baidu.com/img/iknow/wenku/erweima2001.jpg"))
}),o.lang.eventCenter.addEventListener("show-share-panel",function(){e.showTip(),e.hideWeixinTip()}),o.event.on(e.qrcodeBtn,"click",function(i){o.event.preventDefault(i),l.xsend(1,100032);try{e.tip.hide()}catch(i){}m?(m=!1,e.hideWeixinTip()):(m=!0,e.showWeixinTip())})},showWeixinTip:function(){this.qrcodeTip.style.display="block",this.initQrcode()},hideWeixinTip:function(){this.qrcodeTip.style.display="none"},showTip:function(){this.tip.show({contentEl:o.dom.g(d.shareElId),parent:this.el,className:"tools-share-tip"})
},setShareConfig:function(){var e=o.dom,i=e.q("bdshare_t")[0];e.setAttr(i,"data",o.json.stringify({pic:"http://img.baidu.com/img/iknow/wenku/erweima2001.jpg",text:"\u6211\u6b63\u5728@\u767e\u5ea6\u6587\u5e93 \u9605\u8bfb\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011\u8fd9\u7bc7\u6587\u7ae0\uff0c\u63a8\u8350\u7ed9\u5927\u5bb6\uff01\u7528\u6587\u5e93\u5ba2\u6237\u7aef\u53ef\u4ee5\u514d\u8d22\u5bcc\u503c\u4e0b\u8f7d\u8be5\u6587\u6863\uff0c\u5ba2\u6237\u7aef\u4e0b\u8f7d\u5730\u5740\uff1ahttp://"+location.host+"/apps?fr=2001 \u60f3\u7acb\u5373\u9605\u8bfb\u8be5\u6587\u6863\u70b9\u8fd9\u91cc\uff1a",url:location.href}))
}},{superClass:a});t.exports.share=q});