define("wkapi:widget/tpl/api_share/js/toolsTip.js",function(e,t,i){var n,o=e("wkcommon:widget/lib/tangram/base/base.js"),s=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=e("wkcommon:widget/ui/js_core/util/util.js"),l=(e("wkapi:widget/tpl/api_share/js/toolsItem.js").toolsItem,e("wkapi:widget/tpl/api_share/js/config.js").config,e("wkapi:widget/tpl/api_share/js/setting.js").setting,e("wkcommon:widget/ui/lib/jquery/jquery.js")),r=s({Options:{template:['<div class="mod ui-panel trg-br reader_tools_tips tools-tips">','<div class="tips-wrap">','<span class="trangle"></span>','<div class="inner">','<div class="hd">','<span class="act"><a href="###" class="ir close reader_tips_close">\u03a7</a></span>',"</div>",'<div class="bd reader_tools_tips_content_wrap">',"</div>","</div>","</div>","</div>"].join(""),className:"tools-tips",closerEl:"close"},_init:function(){var e=this;
e.el=a.createDom(e.template),e.hideEl=a.createDom('<div id="tip-gc" style="display:none;"></div>'),document.body.appendChild(e.hideEl),e.inner=o.dom.q("reader_tools_tips_content_wrap",e.el,"div")[0],o.dom.hide(e.el),a.zIndexManger.bringToFront(e.el),e.isHide=!0,e.bindEvent()},bindEvent:function(){var e=this;o.event.on(e.el,"click",function(t){var i=o.event.getTarget(t);o.dom.hasClass(i,"reader_tips_close")&&(o.event.preventDefault(t),document.body.focus(),e.hide()),o.dom.hasAttr(i,"data-btn-event")&&o.lang.eventCenter.dispatchEvent(o.dom.getAttr(i,"data-btn-event"))
});var t=Math.max,i=Math.min;a.delegate(document,".reader-tools-btn-wrap","blur",function(n){if(e.parent)if(o.browser.ie){var s=window.event.toElement,a=o.dom.contains(e.parent,s);if(!a){var l=e.el,r=o.page.getMousePosition(),d=o.dom.getPosition(l),p=l.offsetWidth,c=l.offsetHeight,m=t(d.left,r.x)<=i(d.left+p,r.x)&&t(d.top,r.y)<=i(d.top+c,r.y);m?e.parent.focus():e.hide()}}else setTimeout(function(){var t=n.explicitOriginalTarget||document.activeElement,i=o.dom.contains(e.parent,t);i||t===e.parent||e.hide()
},0)})},bindFocusout:function(){},unFocusout:function(){},focusoutCallBack:function(){},show:function(e){var t=this;t.clear(),e.className&&(o.dom.removeClass(t.el,t.options.className),o.dom.addClass(t.el,e.className),t.currentClassName=e.className),t.dispose=e.dispose?!0:!1,a.mix(this.options,e,!0),t.inner.appendChild(t.options.contentEl),o.dom.show(t.options.contentEl),t.parent=t.options.parent,t.options.parent.appendChild(t.el),console.info("el",t.el),o.lang.eventCenter.dispatchEvent("ToolsTipShow.before",{tip:t}),o.dom.show(t.el),o.lang.eventCenter.dispatchEvent("ToolsTipShow.after",{tip:t}),t.el.focus()
},clear:function(){var e=this,t=!1;if(e.inner.children.length&&(t=e.inner.children[0],e.hideEl.appendChild(t),o.lang.eventCenter.dispatchEvent("toolsTip.gc",{el:t,className:e.currentClassName})),e.dispose&&t&&(o.dom.remove(t),o.browser.ie&&o.browser.ie<8)){var i=o.dom.create("div");i.appendChild(t),i.innerHTML="",i=null}},hide:function(){var e=this;o.dom.hide(e.el)},isShowState:function(){return"none"!==l(this.el).css("display")}},{type:"toolsTip"}),d=function(){return n||(n=new r),n};i.exports.toolsTip=r,i.exports.toolsTipCreater=d
});